<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Game - Galanti INK Tattoo Studio</title>
<style>
body {
  font-family: 'Arial', sans-serif;
  background: #111;
  color: #eee;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
header {
  background: #222;
  padding: 20px;
  text-align: center;
  border-bottom: 2px solid #f04;
  position: relative;
}
header h1 {
  margin: 0;
  font-size: 2.5rem;
  letter-spacing: 3px;
}
.hamburger {
  display: none;
  cursor: pointer;
  font-size: 1.8rem;
  position: absolute;
  top: 25px;
  right: 20px;
  color: #f04;
  background: none;
  border: none;
}
nav ul {
  list-style: none;
  margin: 10px 0 0 0;
  padding: 0;
  display: flex;
  justify-content: center;
  gap: 20px;
}
nav ul li { display: inline; }
nav a { color: #f04; text-decoration: none; font-weight: bold; }
nav a:hover, nav a:focus { text-decoration: underline; outline: none; }
nav a[aria-current="page"] { text-decoration: underline; font-weight: bolder; }

/* --- Menu mobile (hamburguer) --- */
@media (max-width: 768px) {
  nav ul {
    flex-direction: column;
    background: #222;
    border: 2px solid #f04;
    position: absolute;
    top: 60px;
    right: 20px;
    width: 150px;
    display: none;
    border-radius: 8px;
    padding: 10px;
    z-index: 100;
  }
  nav ul.show { display: flex; }
  nav ul li { margin: 10px 0; text-align: right; }
  .hamburger { display: block; }
}

/* --- Conte√∫do do jogo --- */
main { flex: 1; max-width: 1000px; margin: 40px auto; padding: 0 20px; text-align: center; }
.game-section {
  background: #222;
  padding: 30px;
  border-radius: 10px;
  box-shadow: 0 0 15px rgba(240, 4, 4, 0.5);
  color: #ddd;
}
.game-section h2 { color: #f04; font-size: 2.5rem; margin-bottom: 20px; }
canvas {
  background: #111;
  border: 2px solid #f04;
  border-radius: 10px;
  cursor: crosshair;
  margin-top: 15px;
  max-width: 100%;
  height: auto;
  user-select: none;
  touch-action: none;
}
.instructions { margin-top: 20px; font-size: 1.1rem; color: #ccc; }
.result-overlay { margin-top: 30px; display: flex; justify-content: center; gap: 40px; color: #eee; flex-wrap: wrap; }
.result-canvas { border: 2px solid #f04; border-radius: 10px; background: #111; max-width: 380px; height: auto; }
.result-caption { margin-top: 10px; font-size: 1.2rem; color: #f04; text-align: center; }
.message { margin-top: 30px; font-size: 1.3rem; color: #f04; min-height: 2em; }
button {
  margin: 10px 5px; padding: 10px 25px; font-size: 1.1rem;
  cursor: pointer; background: #f04; border: none; border-radius: 8px; color: white;
  transition: background-color 0.3s ease;
}
button:hover, button:focus { background: #c00303; outline: none; }
.colorBtn { width: 30px; height: 30px; border: none; border-radius: 50%; margin: 0 5px; cursor: pointer; }
footer { background: #222; padding: 20px; text-align: center; color: #eee; margin-top: 50px; }
</style>
</head>
<body>
<header>
  <h1>Galanti INK Tattoo Studio</h1>
  <button class="hamburger" onclick="toggleMenu()">&#9776;</button>
  <nav>
    <ul id="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="sobre.html">Sobre</a></li>
      <li><a href="galeria.html">Galeria</a></li>
      <li><a href="servi√ßos.html">Servi√ßos</a></li>
      <li><a href="game.html" aria-current="page">Game</a></li>
      <li><a href="contato.html">Contato</a></li>
    </ul>
  </nav>
</header>

<main>
<section class="game-section" role="main" aria-label="Se√ß√£o de Game">
<h2>Desenhe e Tatue!</h2>

<div style="margin:20px 0;">
<label for="designSelect" style="font-size:1.2rem;color:#f04;margin-right:10px;">Escolha seu desenho:</label>
<select id="designSelect" style="padding:8px;border-radius:6px;font-size:1rem;">
<option value="heart">‚ù§Ô∏è Cora√ß√£o</option>
<option value="star">‚≠ê Estrela</option>
<option value="anchor">‚öì √Çncora</option>
<option value="lightning">‚ö° Raio</option>
<option value="flower">üå∏ Flor</option>
<option value="skull">üíÄ Caveira</option>
<option value="infinity">‚àû Infinito</option>
</select>
</div>

<div style="margin:15px 0;">
<label style="font-size:1.1rem;color:#f04;">Escolha a cor: </label>
<button class="colorBtn" data-color="#f04" style="background:#f04;" title="Vermelho"></button>
<button class="colorBtn" data-color="#0f0" style="background:#0f0;" title="Verde"></button>
<button class="colorBtn" data-color="#00f" style="background:#00f;" title="Azul"></button>
<button class="colorBtn" data-color="#ff0" style="background:#ff0;" title="Amarelo"></button>
</div>

<canvas id="gameCanvas" width="800" height="400" aria-label="√Årea de desenho do jogo"></canvas>
<div class="instructions">
<p>Mova a agulha com o mouse (ou dedo). Clique e arraste para riscar sobre o desenho.</p>
</div>
<div id="message" class="message" aria-live="polite" role="alert"></div>
<div style="margin-top:25px;">
<button id="checkBtn" style="display:none;">Ver Resultado</button>
<button id="restartBtn" style="display:none;">Reiniciar</button>
</div>

<div id="result" class="result-overlay" style="display:none;" aria-label="Compara√ß√£o do resultado">
  <div>
    <canvas id="originalCanvas" class="result-canvas" width="380" height="380"></canvas>
    <div class="result-caption">Desenho Guia</div>
  </div>
  <div>
    <canvas id="playerCanvas" class="result-canvas" width="380" height="380"></canvas>
    <div class="result-caption">Sua Tatuagem</div>
  </div>
</div>
</section>
</main>

<footer>
<p>¬© 2025 Galanti INK Tattoo Studio - Todos os direitos reservados</p>
</footer>

<script>
// --- Menu Hamburger ---
function toggleMenu() { document.getElementById('nav-links').classList.toggle('show'); }

// --- Game Setup ---
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const drawLayer = document.createElement('canvas');
drawLayer.width = canvas.width; drawLayer.height = canvas.height;
const drawCtx = drawLayer.getContext('2d');

const guideLayer = document.createElement('canvas');
guideLayer.width = canvas.width; guideLayer.height = canvas.height;
const guideCtx = guideLayer.getContext('2d');

// Resultado
const originalCanvas = document.getElementById('originalCanvas');
const originalCtx = originalCanvas.getContext('2d');
const playerCanvas = document.getElementById('playerCanvas');
const playerCtx = playerCanvas.getContext('2d');

const restartBtn = document.getElementById('restartBtn');
const checkBtn = document.getElementById('checkBtn');
const messageBox = document.getElementById('message');

let isDrawing=false,lastX=0,lastY=0,machineX=canvas.width/2,machineY=canvas.height/2;
let gameCompleted=false,currentDesign="heart",currentColor="#f04";
const cropSize=380,cropX=(canvas.width/2)-(cropSize/2),cropY=(canvas.height/2)-(cropSize/2);

// --- Fun√ß√µes para desenhar formas ---
function drawHeart(c){let x=c.canvas.width/2,y=c.canvas.height/2;c.beginPath();c.moveTo(x,y+30);c.bezierCurveTo(x-50,y-20,x-50,y+40,x,y+70);c.bezierCurveTo(x+50,y+40,x+50,y-20,x,y+30);c.stroke();}
function drawStar(c){let cx=c.canvas.width/2,cy=c.canvas.height/2,spikes=5,outer=60,inner=25;let rot=Math.PI/2*3,x=cx,y=cy;let step=Math.PI/spikes;c.beginPath();c.moveTo(cx,cy-outer);for(let i=0;i<spikes;i++){x=cx+Math.cos(rot)*outer;y=cy+Math.sin(rot)*outer;c.lineTo(x,y);rot+=step;x=cx+Math.cos(rot)*inner;y=cy+Math.sin(rot)*inner;c.lineTo(x,y);rot+=step;}c.lineTo(cx,cy-outer);c.closePath();c.stroke();}
function drawAnchor(c){let cx=c.canvas.width/2,cy=c.canvas.height/2;c.beginPath();c.arc(cx,cy+40,40,0,Math.PI,true);c.moveTo(cx,cy-60);c.lineTo(cx,cy+40);c.moveTo(cx-40,cy+40);c.lineTo(cx+40,cy+40);c.moveTo(cx,cy-60);c.arc(cx,cy-70,10,0,2*Math.PI);c.stroke();}
function drawLightning(c){let cx=c.canvas.width/2,cy=c.canvas.height/2;c.beginPath();c.moveTo(cx-20,cy-60);c.lineTo(cx+10,cy-10);c.lineTo(cx-10,cy-10);c.lineTo(cx+20,cy+60);c.lineTo(cx-10,cy+10);c.lineTo(cx+10,cy+10);c.closePath();c.stroke();}
function drawFlower(c){let cx=c.canvas.width/2,cy=c.canvas.height/2;c.beginPath();for(let i=0;i<6;i++){c.moveTo(cx,cy);c.arc(cx,cy,40,i*Math.PI/3,(i+1)*Math.PI/3);}c.stroke();c.beginPath();c.arc(cx,cy,15,0,2*Math.PI);c.stroke();}
function drawSkull(c){let cx=c.canvas.width/2,cy=c.canvas.height/2;c.beginPath();c.arc(cx,cy,50,0,Math.PI*2);c.moveTo(cx-20,cy-10);c.arc(cx-20,cy-10,10,0,Math.PI*2);c.moveTo(cx+20,cy-10);c.arc(cx+20,cy-10,10,0,Math.PI*2);c.moveTo(cx-15,cy+20);c.lineTo(cx+15,cy+20);c.stroke();}
function drawInfinity(c){let cx=c.canvas.width/2,cy=c.canvas.height/2;c.beginPath();c.moveTo(cx-60,cy);c.bezierCurveTo(cx-60,cy-40,cx,cy-40,cx,cy);c.bezierCurveTo(cx,cy+40,cx-60,cy+40,cx-60,cy);c.moveTo(cx,cy);c.bezierCurveTo(cx,cy-40,cx+60,cy-40,cx+60,cy);c.bezierCurveTo(cx+60,cy+40,cx,cy+40,cx,cy);c.stroke();}

// --- Desenho guia ---
function drawTattoo(c){c.clearRect(0,0,c.canvas.width,c.canvas.height);c.strokeStyle='#666';c.lineWidth=3;switch(currentDesign){case "heart": drawHeart(c); break;case "star": drawStar(c); break;case "anchor": drawAnchor(c); break;case "lightning": drawLightning(c); break;case "flower": drawFlower(c); break;case "skull": drawSkull(c); break;case "infinity": drawInfinity(c); break;}}

// --- M√°quina ---
function drawMachine(x,y){ctx.beginPath();ctx.arc(x,y,4,0,2*Math.PI);ctx.fillStyle='#fff';ctx.fill();ctx.strokeStyle='#f04';ctx.lineWidth=1.5;ctx.stroke();}

// --- Risco do jogador ---
function drawStroke(x1,y1,x2,y2){drawCtx.strokeStyle=currentColor;drawCtx.lineWidth=6;drawCtx.lineCap='round';drawCtx.beginPath();drawCtx.moveTo(x1,y1);drawCtx.lineTo(x2,y2);drawCtx.stroke();}

// --- Renderiza jogo ---
function drawGame(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.drawImage(guideLayer,0,0);   // desenha guia no fundo
  ctx.drawImage(drawLayer,0,0);    // desenha jogador por cima
  if(!gameCompleted) drawMachine(machineX,machineY);
}

// --- Eventos mouse/touch ---
function getPointerPos(e){const rect=canvas.getBoundingClientRect();let clientX,clientY;if(e.touches){clientX=e.touches[0].clientX;clientY=e.touches[0].clientY;}else{clientX=e.clientX;clientY=e.clientY;}const scaleX=canvas.width/rect.width,scaleY=canvas.height/rect.height;return {x:(clientX-rect.left)*scaleX,y:(clientY-rect.top)*scaleY};}

canvas.addEventListener('mousedown',(e)=>{if(gameCompleted)return;isDrawing=true;let pos=getPointerPos(e);lastX=pos.x;lastY=pos.y;});
canvas.addEventListener('mousemove',(e)=>{if(gameCompleted)return;let pos=getPointerPos(e);machineX=pos.x;machineY=pos.y;if(isDrawing){drawStroke(lastX,lastY,pos.x,pos.y);lastX=pos.x;lastY=pos.y;checkBtn.style.display='inline-block';}drawGame();});
canvas.addEventListener('mouseup',()=>{isDrawing=false;});
canvas.addEventListener('mouseleave',()=>{isDrawing=false;});

canvas.addEventListener('touchstart',(e)=>{e.preventDefault();if(gameCompleted)return;isDrawing=true;let pos=getPointerPos(e);lastX=pos.x;lastY=pos.y;},{passive:false});
canvas.addEventListener('touchmove',(e)=>{e.preventDefault();if(gameCompleted)return;let pos=getPointerPos(e);machineX=pos.x;machineY=pos.y;if(isDrawing){drawStroke(lastX,lastY,pos.x,pos.y);lastX=pos.x;lastY=pos.y;checkBtn.style.display='inline-block';}drawGame();},{passive:false});
canvas.addEventListener('touchend',(e)=>{e.preventDefault();isDrawing=false;});

// --- Finaliza√ß√£o ---
function finishGame(){
  gameCompleted=true;
  messageBox.textContent='üéâ Parab√©ns! Veja abaixo a compara√ß√£o entre sua tatuagem e o desenho original.';
  document.getElementById('result').style.display='flex';
  restartBtn.style.display='inline-block';
  checkBtn.style.display='none';
  // mostra compara√ß√£o
  originalCtx.clearRect(0,0,originalCanvas.width,originalCanvas.height);
  playerCtx.clearRect(0,0,playerCanvas.width,playerCanvas.height);
  drawTattoo(originalCtx);
  playerCtx.drawImage(drawLayer,cropX,cropY,cropSize,cropSize,0,0,cropSize,cropSize);
}

checkBtn.addEventListener('click',()=>{if(!gameCompleted) finishGame();});
restartBtn.addEventListener('click',()=>{gameCompleted=false;drawCtx.clearRect(0,0,drawLayer.width,drawLayer.height);messageBox.textContent='';document.getElementById('result').style.display='none';restartBtn.style.display='none';checkBtn.style.display='none';machineX=canvas.width/2;machineY=canvas.height/2;drawGame();});

document.getElementById("designSelect").addEventListener("change",(e)=>{
  currentDesign=e.target.value;
  drawCtx.clearRect(0,0,drawLayer.width,drawLayer.height);
  messageBox.textContent='';
  document.getElementById('result').style.display='none';
  restartBtn.style.display='none';
  checkBtn.style.display='none';
  gameCompleted=false;
  drawTattoo(guideCtx);
  drawGame();
});

document.querySelectorAll(".colorBtn").forEach(btn=>btn.addEventListener("click",()=>{currentColor=btn.dataset.color;}));

// --- Inicializa√ß√£o ---
drawTattoo(guideCtx);
drawGame();
</script>
</body>
</html>
